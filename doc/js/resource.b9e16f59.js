(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["resource"],{2240:function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"resource"},[r("resource-list")],1)},n=[],a=r("2b0e"),s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"resource"},[r("el-card",{staticClass:"box-card"},[r("el-form",{ref:"form",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.form}},[r("el-form-item",{attrs:{prop:"name",label:"资源名称"}},[r("el-input",{attrs:{placeholder:"资源名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),r("el-form-item",{attrs:{prop:"url",label:"资源路径"}},[r("el-input",{attrs:{placeholder:"资源路径"},model:{value:e.form.url,callback:function(t){e.$set(e.form,"url",t)},expression:"form.url"}})],1),r("el-form-item",{attrs:{prop:"categoryId",label:"资源分类"}},[r("el-select",{attrs:{placeholder:"全部",clearable:""},model:{value:e.form.categoryId,callback:function(t){e.$set(e.form,"categoryId",t)},expression:"form.categoryId"}},e._l(e.resourceCategories,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),r("el-form-item",[r("el-button",{attrs:{type:"primary",disabled:e.isLoading},on:{click:function(t){return e.onReset("form")}}},[e._v("重置")]),r("el-button",{attrs:{type:"primary",disabled:e.isLoading},on:{click:e.onSubmit}},[e._v("查询搜索")])],1)],1)],1),r("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[r("div",[r("el-button",{attrs:{size:"small"},on:{click:e.handleAddClick}},[e._v("添加")]),r("resource-classify")],1)]),r("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{data:e.resources,border:""}},[r("el-table-column",{attrs:{align:"center",prop:"id",label:"编号",width:"180"}}),r("el-table-column",{attrs:{align:"center",prop:"name",label:"资源名称",width:"180"}}),r("el-table-column",{attrs:{align:"center",prop:"url","min-width":"180",label:"资源路径"}}),r("el-table-column",{attrs:{align:"center",prop:"description",label:"描述"}}),r("el-table-column",{attrs:{align:"center",prop:"createdTime",label:"添加时间",formatter:e.carTimeFilter}}),r("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){return e.handleEditClick(t.row)}}},[e._v("编辑")]),r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){return e.onDelete(t.row)}}},[e._v("删除")])]}}])})],1),r("el-pagination",{attrs:{disabled:e.isLoading,"current-page":e.form.current,"page-sizes":[5,10,20,30],"page-size":e.form.size,layout:"total, sizes, prev, pager, next, jumper",total:e.totalCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.form,"current",t)},"update:current-page":function(t){return e.$set(e.form,"current",t)}}}),r("el-dialog",{attrs:{title:"添加资源",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[e.dialogVisible?r("create-or-edit",{attrs:{resourceCategories:e.resourceCategories,isEdit:e.isEdit,row:e.rowObj},on:{onSuccess:e.onSuccessEvent,cancel:function(t){e.dialogVisible=!1}}}):e._e()],1)],1)],1)},c=[],i=r("1da1"),l=(r("96cf"),r("675f")),u=r("9d1c"),d=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"create-edit"},[r("el-form",{ref:"resourceForm",attrs:{"label-width":"80px",model:e.resourceForm}},[r("el-form-item",{attrs:{label:"资源名称"}},[r("el-input",{model:{value:e.resourceForm.name,callback:function(t){e.$set(e.resourceForm,"name",t)},expression:"resourceForm.name"}})],1),r("el-form-item",{attrs:{label:"资源路径"}},[r("el-input",{model:{value:e.resourceForm.url,callback:function(t){e.$set(e.resourceForm,"url",t)},expression:"resourceForm.url"}})],1),r("el-form-item",{attrs:{label:"资源分类"}},[r("el-select",{attrs:{clearable:"",placeholder:"全部"},model:{value:e.resourceForm.categoryId,callback:function(t){e.$set(e.resourceForm,"categoryId",t)},expression:"resourceForm.categoryId"}},e._l(e.resourceCategories,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),r("el-form-item",{attrs:{label:"描述"}},[r("el-input",{attrs:{type:"textarea",rows:3},model:{value:e.resourceForm.description,callback:function(t){e.$set(e.resourceForm,"description",t)},expression:"resourceForm.description"}})],1),r("el-form-item",[r("el-button",{on:{click:function(t){return e.$emit("cancel")}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("确 定")])],1)],1)],1)},m=[],f=a["default"].extend({props:{isEdit:{type:Boolean,default:!1},resourceCategories:{type:Array,require:!0},row:{type:Object,require:!1,default:null}},data:function(){return{resourceForm:{categoryId:1,description:"",id:null,name:null,url:null}}},created:function(){this.loadDatas()},methods:{loadDatas:function(){this.isEdit&&(this.resourceForm=this.row)},onSubmit:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(l["f"])(e.resourceForm);case 2:r=t.sent,o=r.data,e.$emit("onSuccess"),e.$message.success(o.mesg);case 6:case"end":return t.stop()}}),t)})))()}}}),b=f,p=r("2877"),h=Object(p["a"])(b,d,m,!1,null,"33bcc78f",null),g=h.exports,v=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-button",{attrs:{size:"small"},on:{click:e.handleResourceClassify}},[e._v("资源分类")])},w=[],y=a["default"].extend({name:"AddResourceClassification",methods:{handleResourceClassify:function(){this.$router.push({name:"resource-classification"})}}}),x=y,C=Object(p["a"])(x,v,w,!1,null,null,null),O=C.exports,R=a["default"].extend({name:"ResourceList",data:function(){return{resources:[],form:{current:1,size:5,total:0,categoryId:"",name:"",url:""},totalCount:0,resourceCategories:[],isLoading:!0,dialogVisible:!1,isEdit:!1,rowObj:null}},components:{CreateOrEdit:g,ResourceClassify:O},created:function(){this.loadResources(),this.loadResourcesCategories()},methods:{carTimeFilter:function(e,t){var r=e[t.property];if(r)return new Date(r).toLocaleDateString()},loadResourcesCategories:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(u["b"])();case 2:r=t.sent,o=r.data,e.resourceCategories=o.data;case 5:case"end":return t.stop()}}),t)})))()},loadResources:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isLoading=!0,t.next=3,Object(l["d"])(e.form);case 3:r=t.sent,o=r.data,e.resources=o.data.records,e.totalCount=o.data.total,e.isLoading=!1;case 8:case"end":return t.stop()}}),t)})))()},handleSizeChange:function(e){this.form.size=e,this.form.current=1,this.loadResources()},handleCurrentChange:function(e){this.form.current=e,this.loadResources(),console.log("当前页: ".concat(e))},onSubmit:function(){this.form.current=1,this.loadResources()},onReset:function(e){this.$refs[e].resetFields(),this.form.current=1,this.loadResources()},handleEditClick:function(e){this.dialogVisible=!0,this.isEdit=!0,this.rowObj=e},handleAddClick:function(){this.dialogVisible=!0,this.isEdit=!1},onSuccessEvent:function(){this.dialogVisible=!1,this.loadResources()},onDelete:function(e){var t=this;this.$confirm("确认删除么？","删除提示",{}).then(Object(i["a"])(regeneratorRuntime.mark((function r(){var o,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(l["b"])(e.id);case 2:o=r.sent,n=o.data,"000000"===n.code&&(t.$message.success(n.mesg),t.loadResources());case 5:case"end":return r.stop()}}),r)})))).catch((function(){t.$message.info("已取消删除")}))}}}),k=R,j=Object(p["a"])(k,s,c,!1,null,"7528ee06",null),E=j.exports,$=a["default"].extend({name:"ResourceIndex",components:{ResourceList:E}}),F=$,_=Object(p["a"])(F,o,n,!1,null,"629461e8",null);t["default"]=_.exports},"675f":function(e,t,r){"use strict";r.d(t,"d",(function(){return n})),r.d(t,"c",(function(){return a})),r.d(t,"a",(function(){return s})),r.d(t,"e",(function(){return c})),r.d(t,"f",(function(){return i})),r.d(t,"b",(function(){return l}));var o=r("b32d"),n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(o["a"])({method:"POST",url:"/boss/resource/getResourcePages",data:e})},a=function(){return Object(o["a"])({method:"GET",url:"/boss/resource/category/getAll"})},s=function(e){return Object(o["a"])({method:"POST",url:"/boss/resource/allocateRoleResources",data:e})},c=function(e){return Object(o["a"])({method:"GET",url:"/boss/resource/getRoleResources",params:{roleId:e}})},i=function(e){return Object(o["a"])({method:"POST",url:"/boss/resource/saveOrUpdate",data:e})},l=function(e){return Object(o["a"])({method:"DELETE",url:"/boss/resource/".concat(e)})}},"9d1c":function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return a})),r.d(t,"a",(function(){return s}));var o=r("b32d"),n=function(){return Object(o["a"])({method:"GET",url:"/boss/resource/category/getAll"})},a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(o["a"])({method:"POST",url:"/boss/resource/category/saveOrderUpdate",data:e})},s=function(e){return Object(o["a"])({method:"DELETE",url:"/boss/resource/category/".concat(e)})}}}]);
//# sourceMappingURL=resource.b9e16f59.js.map