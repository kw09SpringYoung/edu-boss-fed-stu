(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["alloc-menu"],{2257:function(e,t,n){"use strict";n.d(t,"g",(function(){return u})),n.d(t,"d",(function(){return a})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return s})),n.d(t,"e",(function(){return o})),n.d(t,"a",(function(){return i})),n.d(t,"f",(function(){return d}));var r=n("b32d"),u=function(e){return Object(r["a"])({method:"POST",url:"/boss/menu/saveOrUpdate",data:e})},a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;return Object(r["a"])({method:"GET",url:"/boss/menu/getEditMenuInfo",params:{id:e}})},c=function(){return Object(r["a"])({method:"GET",url:"/boss/menu/getAll"})},s=function(e){return Object(r["a"])({method:"DELETE",url:"/boss/menu/".concat(e)})},o=function(){return Object(r["a"])({method:"GET",url:"/boss/menu/getMenuNodeList"})},i=function(e){return Object(r["a"])({method:"POST",url:"/boss/menu/allocateRoleMenus",data:e})},d=function(e){return Object(r["a"])({method:"GET",url:"/boss/menu/getRoleMenus",params:{roleId:e}})}},"7ca9":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"allo-menu"},[n("el-card",[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",[e._v("分配菜单")]),n("el-button",{staticClass:"el-icon-close",staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(t){return e.$router.back()}}})],1),n("el-tree",{ref:"menu-tree",attrs:{"show-checkbox":"","default-expand-all":"",data:e.menus,props:e.defaultProps,"node-key":"id","default-checked-keys":e.checkedKeys}}),n("div",{staticStyle:{"text-align":"center"}},[n("el-button",{on:{click:e.resetChecked}},[e._v("清空")]),n("el-button",{attrs:{type:"primary"},on:{click:e.onSave}},[e._v("保存")])],1)],1)],1)},u=[],a=n("2909"),c=n("1da1"),s=(n("96cf"),n("a9e3"),n("d3b7"),n("159b"),n("99af"),n("2b0e")),o=n("2257"),i=s["default"].extend({name:"AllocMenu",props:{roleId:{type:[String,Number],require:!0}},data:function(){return{menus:[],defaultProps:{children:"subMenuList",label:"name"},checkedKeys:[]}},created:function(){this.loadMenus(),this.loadRoleMenus()},methods:{loadRoleMenus:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["f"])(e.roleId);case 2:n=t.sent,r=n.data,e.getCheckedKeys(r.data);case 5:case"end":return t.stop()}}),t)})))()},getCheckedKeys:function(e){var t=this;e.forEach((function(e){!0!==e.selected||e.subMenuList||(t.checkedKeys=[].concat(Object(a["a"])(t.checkedKeys),[e.id])),e.subMenuList&&t.getCheckedKeys(e.subMenuList)}))},loadMenus:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["e"])();case 2:n=t.sent,r=n.data,e.menus=r.data;case 5:case"end":return t.stop()}}),t)})))()},onSave:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.$refs["menu-tree"].getCheckedKeys(),console.log(n),t.next=4,Object(o["a"])({roleId:e.roleId,menuIdList:n});case 4:e.$message.success("操作成功"),e.$router.back();case 6:case"end":return t.stop()}}),t)})))()},resetChecked:function(){this.$refs["menu-tree"].setCheckedKeys([])}}}),d=i,l=n("2877"),f=Object(l["a"])(d,r,u,!1,null,"b39c80da",null);t["default"]=f.exports}}]);
//# sourceMappingURL=alloc-menu.c67b0892.js.map